# Ethereum dev network with µRaiden

This repo contains a python script running a local Ethereum network for development use. It runs of the following geth instances.

| Node           | RPC port | Network port | Peers                          | Mining  |
| -------------- | -------- | ------------ | ------------------------------ | ------- |
| _Full node_    | 8545     | 30303        | _Light node 1_, _Light node 2_ | `True`  |
| _Light node 1_ | 9545     | 30342        | _Full node_                    | `False` |
| _Light node 2_ | 9546     | 30343        | _Full node_                    | `False` |

### µRaiden

The [µRaiden](https://github.com/raiden-network/microraiden) smart contracts are deployed in the bootstrapped network with the first account `0x627306090abaB3A6e1400e9345bC60c78a8BEf57` as owner:

#### Contract with challenge period = 500 blocks

* RaidenMicroTransferChannels address: `0xF12b5dd4EAD5F743C6BaA640B0216200e89B60Da`
* CustomToken address: `0x8CdaF0CD259887258Bc13a92C0a6dA92698644C0`

#### Contract with challenge period = 15 blocks

* RaidenMicroTransferChannels address: `0xf25186B5081Ff5cE73482AD761DB0eB0d25abfBF`

## Running network

Before running do the following.

```shell
# Install virtual environment
virtualenv -p python3 env

# Activate virtual environment
. env/bin/activate

# Install dependencies
pip install -r requirements.txt
```

Run the script with active virtual environment:

```shell
python3 main.py
```

## Options

```shell
Usage: main.py [OPTIONS]

Options:
  --data-dir TEXT        Data directory for the databases and keystore.
  --networkid TEXT       Network identifier.
  --passwords-file TEXT  Password file to use for non-interactive password
                         input.
  --reset                Reset the databases of all geth nodes.
  --help                 Show this message and exit.
```

If you run the script with `--reset`, the blockchain will be reset to checkpoint state (which is contained in `blockchain.tar.gz`), so all changes made by the previous run will be rolled back. This is useful when running tests.

By default, the two first accounts are unlocked when `geth` starts.

## Network Info

The bootstrapped network with these parameters is already included:

```
Network id: 15
Difficulty: 1
Gas limit: 4712389
Engine: ethash
```

Ten accounts are already created and pre-allocated with Ξ999 each. These accounts are generated using mnemonic `candy maple cake sugar pudding cream honey rich smooth crumble sweet treat`, which you can use when developing with MetaMask. Also, they match ones generated by `truffle develop`.

```
0x627306090abab3a6e1400e9345bc60c78a8bef57 (private key c87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3, password 0)
0xf17f52151ebef6c7334fad080c5704d77216b732 (private key ae6ae8e5ccbfb04590405997ee2d52d2b330726137b875053c36d94e974d162f, password 1)
0xc5fdf4076b8f3a5357c5e395ab970b5b54098fef (private key 0dbbe8e4ae425a6d2687f1a7e3ba17bc98c673636790f1b8ad91193c05875ef1, password 2)
0x821aea9a577a9b44299b9c15c88cf3087f3b5544 (private key c88b703fb08cbea894b6aeff5a544fb92e78a18e19814cd85da83b71f772aa6c, password 3)
0x0d1d4e623d10f9fba5db95830f7d3839406c6af2 (private key 388c684f0ba1ef5017716adb5d21a053ea8e90277d0868337519f97bede61418, password 4)
0x2932b7a2355d6fecc4b5c0b6bd44cc31df247a2e (private key 659cbb0e2411a44db63778987b1e22153c086a95eb6b18bdf89de078917abc63, password 5)
0x2191ef87e392377ec08e7c08eb105ef5448eced5 (private key 82d052c865f5763aad42add438569276c00d3d88a2d062d36b2bae914d58b8c8, password 6)
0x0f4f2ac550a1b4e2280d04c21cea7ebd822934b5 (private key aa3680d5d48a8283413f7a108367c7299ca73f553735860a87b08f39395618b7, password 7)
0x6330a553fc93768f612722bb8c2ec78ac90b3bbc (private key 0f62d96d6675f32685bbdb8ac13cda7c23436f63efbb9d07700d8669ff12b7c4, password 8)
0x5aeda56215b167893e80b4fe645ba6d5bab767de (private key 8d5366123cb560bb606379f90a0bfd4769eecc0557f1b362dcae9012b548b1e5, password 9)
```
